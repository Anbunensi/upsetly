% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/upsetly.R
\name{upsetly}
\alias{upsetly}
\title{Interactive UpSet plot with copyable tooltip text}
\usage{
upsetly(
  x,
  set_cols = NULL,
  id_col = NULL,
  min_intersection_size = 1,
  max_n_intersections = NULL,
  point_size = 8,
  bar_color_sets = "black",
  bar_color_inters = "black",
  active_color = "black",
  inactive_color = "lightgray",
  line_color = "black",
  title = "UpSet (plotly)",
  height = 500,
  width = NULL,
  members_per_line = 20,
  ...
)
}
\arguments{
\item{x}{A data frame containing at least the set columns and optionally an ID column.}

\item{set_cols}{Character vector of column names (in \code{x}) that define the sets.
These columns are interpreted as 0/1 (or logical/character) membership indicators.
If \code{NULL}, all columns except \code{id_col} will be treated as set columns.}

\item{id_col}{Optional name of a column in \code{x} that identifies each element
(e.g. gene ID). If \code{NULL}, a synthetic \code{.elem_id} column will be created.}

\item{min_intersection_size}{Minimum size of an intersection (number of elements)
to retain in the plot.}

\item{max_n_intersections}{Maximum number of intersections to keep, sorted by
descending size. Also used as an upper bound for the number of member IDs
shown in the tooltip for each intersection. If \code{NULL}, no explicit limit is applied.}

\item{point_size}{Size of points in the dot matrix.}

\item{bar_color_sets}{Bar color for set sizes (left).}

\item{bar_color_inters}{Bar color for intersections (top).}

\item{active_color}{Color for dots that are part of an intersection.}

\item{inactive_color}{Color for dots that are not part of an intersection.}

\item{line_color}{Color for vertical lines connecting dots in the dot matrix.}

\item{title}{Plot title.}

\item{height}{Height of the plot (pixels).}

\item{width}{Width of the plot (pixels).}

\item{members_per_line}{Number of member IDs shown per line in the tooltip
(and in the synchronized text box).}
}
\value{
A 'plotly' htmlwidget. When rendered in HTML, the widget also injects
JavaScript that synchronizes full tooltip text into \verb{#members_box} if present,
with click-to-lock and double-click-to-unlock behavior.
}
\description{
\code{upsetly()} creates an interactive UpSet-like plot using 'plotly'. It supports:
\itemize{
\item Counting intersections across multiple binary set columns.
\item Visualizing set sizes (left bar chart) and intersections (top bar chart + dot matrix).
\item Displaying rich tooltip text including intersection name, size, and members.
\item Synchronizing the full tooltip text into an HTML element with id \code{members_box}
(if present), which makes it easy to copy the information in Quarto/R Markdown.
}

When used in an HTML environment (e.g., Quarto, R Markdown, or Shiny),
you can add a tag such as:
\preformatted{
<pre id="members_box" style="
  border: 1px solid #ccc;
  padding: 8px;
  min-height: 120px;
  white-space: pre-wrap;
  font-family: monospace;
"></pre>
}
Then:
\itemize{
\item Moving the mouse over an intersection bar updates the box with the tooltip text
(Intersection, Size, Members, etc.).
\item Clicking a bar will \strong{lock} the content so that hover on other bars does not change it.
\item Double-clicking the plot background will \strong{unlock} and clear the box.
}
}
\examples{
\dontrun{
library(upsetly)

# Example binary matrix
set.seed(1)
df <- data.frame(
  gene = paste0("g", 1:100),
  A = rbinom(100, 1, 0.3),
  B = rbinom(100, 1, 0.4),
  C = rbinom(100, 1, 0.2),
  stringsAsFactors = FALSE
)

p <- upsetly(
  x = df,
  set_cols = c("A", "B", "C"),
  id_col = "gene",
  max_n_intersections = 50,
  members_per_line = 10
)
p
}

}
